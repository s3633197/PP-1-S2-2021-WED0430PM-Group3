{"remainingRequest":"Y:\\RMIT\\Project1\\PP-1-S2-2021-WED0430PM-Group3\\frontend\\node_modules\\babel-loader\\lib\\index.js!Y:\\RMIT\\Project1\\PP-1-S2-2021-WED0430PM-Group3\\frontend\\src\\axios.js","dependencies":[{"path":"Y:\\RMIT\\Project1\\PP-1-S2-2021-WED0430PM-Group3\\frontend\\src\\axios.js","mtime":1633324334273},{"path":"Y:\\RMIT\\Project1\\PP-1-S2-2021-WED0430PM-Group3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"Y:\\RMIT\\Project1\\PP-1-S2-2021-WED0430PM-Group3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi9yb3V0ZXIiOwppbXBvcnQgRWxlbWVudCBmcm9tICJlbGVtZW50LXVpIjsKYXhpb3MuZGVmYXVsdHMuYmFzZVVSTCA9ICJodHRwOi8vbG9jYWxob3N0OjkwMDAiOwp2YXIgcmVxdWVzdCA9IGF4aW9zLmNyZWF0ZSh7CiAgdGltZW91dDogNTAwMCwKICBoZWFkZXJzOiB7CiAgICAvLyAnQ29udGVudC1UeXBlJyA6ICJhcHBsaWNhdGlvbi9qc29uOyIKICAgICdDb250ZW50LVR5cGUnOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsCiAgICAvLyAnQ29udGVudC1UeXBlJyA6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiCiAgICAnYXV0aGVudGljYXRpb24nOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogIH0KfSk7CnJlcXVlc3QuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBjb25maWcuaGVhZGVyc1snYXV0aGVudGljYXRpb24nXSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogIHJldHVybiBjb25maWc7Cn0pOwpyZXF1ZXN0LmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogIHZhciByZXMgPSByZXNwb25zZS5kYXRhOwoKICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMSB8fCByZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICBpZiAocmVzLm1lc3NhZ2UgIT09IG51bGwpIHsKICAgICAgRWxlbWVudC5NZXNzYWdlLnN1Y2Nlc3MocmVzLm1lc3NhZ2UpOwogICAgfQoKICAgIHJldHVybiByZXNwb25zZTsKICB9IGVsc2UgaWYgKHJlcy5zdGF0dXNDb2RlID09PSA0MDApIHsKICAgIEVsZW1lbnQuTWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLmRhdGEubWVzc2FnZSk7CiAgfSBlbHNlIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gNDAxKSB7CiAgICBFbGVtZW50Lk1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5tZXNzYWdlKTsKICB9IGVsc2UgaWYgKHJlcy5zdGF0dXNDb2RlID09PSA1MDApIHsKICAgIEVsZW1lbnQuTWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLm1lc3NhZ2UpOwogIH0gZWxzZSB7CiAgICBjb25zb2xlLmxvZygiZXJyb3IgY29kZSAiICsgcmVzLnN0YXR1c0NvZGUpOwogICAgRWxlbWVudC5NZXNzYWdlLmVycm9yKCJlcnJvciBtZXNzYWdlOiAiICsgcmVzLm1lc3NhZ2UpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5tZXNzYWdlKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKCJlcnJvcjogIiArIGVycm9yKTsKICBjb25zb2xlLmxvZygiZXJyb3IgcmVzcG9uc2U6ICIgKyBlcnJvci5yZXNwb25zZS5zdGF0dXMpOwoKICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHsKICAgIHJvdXRlci5wdXNoKCIvIik7CiAgfQoKICBFbGVtZW50Lk1lc3NhZ2UuZXJyb3IoZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlLCB7CiAgICBkdXJhdGlvbjogMzAwMAogIH0pOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCByZXF1ZXN0Ow=="},{"version":3,"sources":["Y:/RMIT/Project1/PP-1-S2-2021-WED0430PM-Group3/frontend/src/axios.js"],"names":["axios","router","Element","defaults","baseURL","request","create","timeout","headers","localStorage","getItem","interceptors","use","config","response","console","log","res","data","statusCode","message","Message","success","error","Promise","reject","status","push","duration"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport router from \"./router\";\r\nimport Element from \"element-ui\";\r\n\r\naxios.defaults.baseURL = \"http://localhost:9000\"\r\n\r\nconst request = axios.create ({\r\n    timeout:5000,\r\n    headers: {\r\n        // 'Content-Type' : \"application/json;\"\r\n        'Content-Type' : \"application/json; charset=utf-8\",\r\n        // 'Content-Type' : \"application/x-www-form-urlencoded; application/json; charset=utf-8\"\r\n        'authentication' : localStorage.getItem(\"token\")\r\n    }\r\n})\r\n\r\nrequest.interceptors.request.use(\r\n    config => {\r\n        config.headers['authentication'] = localStorage.getItem(\"token\")\r\n        return config\r\n    }\r\n)\r\n\r\nrequest.interceptors.response.use(\r\n    response =>{\r\n        console.log(response)\r\n        let res = response.data\r\n        if(res.statusCode === 201 || res.statusCode === 200){\r\n            if(res.message !== null){\r\n                Element.Message.success(res.message)\r\n            }\r\n            return response\r\n        }else if(res.statusCode === 400){\r\n            Element.Message.error(res.message)\r\n            return Promise.reject(res.data.message)\r\n        }else if(res.statusCode === 401){\r\n            Element.Message.error(res.message)\r\n            return Promise.reject(res.message)\r\n        }else if(res.statusCode === 500){\r\n            Element.Message.error(res.message)\r\n            return Promise.reject(res.message)\r\n        }else{\r\n            console.log(\"error code \" + res.statusCode)\r\n            Element.Message.error(\"error message: \" + res.message)\r\n            return Promise.reject(res.message)\r\n        }\r\n\r\n    }, \r\n\r\n    error =>{\r\n        console.log(\"error: \"+error)\r\n        console.log(\"error response: \"+error.response.status)\r\n        if(error.response.status === 403){\r\n            router.push(\"/\")\r\n        }\r\n        Element.Message.error(error.response.data.message, {duration:3000})\r\n        return Promise.reject(error)\r\n    }\r\n    \r\n\r\n)\r\n\r\nexport default request"]}]}